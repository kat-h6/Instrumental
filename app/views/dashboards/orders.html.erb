
<div class="container">
<div class="d-flex">
  <h1>My Instruments (<%= @instruments.count %>)</h1> <%= link_to 'Add new instrument', root_path, class: 'btn btn-primary' %>
</div>
<div class="list-wrapper">
<% @instruments.each do |instrument| %>
  <div class="list-item">
    <div class="d-flex">
      <div class="inner-img">
      <%= cl_image_tag instrument.photo.key %>
      </div>
      <div class="inner-content">
        <div class="d-flex">
          <h2><%= instrument.name %></h2>
          <h4>Rate: $<%= instrument.rate %></h4>
        </div>
        <p><%= instrument.details %></p>
      </div>
    </div>
    <% instrument.bookings.each do |booking| %>
      <h4>Renter: <%= booking.renter %></h4>
      <p>Start date: <%= booking.start_date %></p>
      <p>End date: <%= booking.end_date %></p>
      <p>Price: <%= booking.price %></p>
      <% if booking.status == "pending" %>
      <%= simple_form_for booking do |f| %>
      <%= f.input :status, as: :hidden, :input_html => { :value => "accepted" } %>
      <%= f.button :submit, "accept", class: 'btn btn-success' %>
      <% end %>
      
      <%= simple_form_for booking do |f| %>
      <%= f.input :status, as: :hidden, :input_html => { :value => "rejected" } %>
      <%= f.button :submit, "reject", class: 'btn btn-success' %>
      <% end %>
      <% else %> 
        <p> Status: <%= booking.status %> </p>
      <% end %>
      <%= link_to 'Remove', booking_path(booking), method: :delete,
      data: { confirm: "Are you sure you want to delete the booking for #{booking.renter}?" }, class: 'btn btn-danger' %>
      
     <% end %>
  </div>
<% end %>
</div>
<%= link_to 'Back', root_path, class: 'btn btn-primary' %>
</div>
